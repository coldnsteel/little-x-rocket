<!DOCTYPE html>
<html>
<head>
    <title>Little X - Working Version</title>
    <style>
        body { background: #0a0a0a; color: white; font-family: Arial; text-align: center; padding: 50px; }
        .btn { background: purple; color: white; padding: 20px; font-size: 18px; border: none; cursor: pointer; margin: 10px; }
        .hidden { display: none; }
        
        .rocket {
            width: 60px;
            height: 120px;
            margin: 20px auto;
            cursor: pointer;
            position: relative;
            animation: bounce 2s ease-in-out infinite;
        }
        
        .centrifuge-container {
            width: 250px;
            height: 250px;
            border: 3px solid #8a2be2;
            border-radius: 50%;
            position: relative;
            margin: 30px auto;
            animation: spin 3s linear infinite;
            background: rgba(138, 43, 226, 0.1);
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .centrifuge-pod {
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, #ff69b4, #8a2be2);
            border-radius: 50%;
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.8);
            animation: counter-spin 3s linear infinite;
        }
        
        @keyframes counter-spin {
            from { transform: translateX(-50%) rotate(0deg); }
            to { transform: translateX(-50%) rotate(-360deg); }
        }
        
        .g-force-display {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff69b4;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 105, 180, 0.8);
        }
        
        .achievement-badge {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            z-index: 100;
            border: 3px solid #ffa500;
            animation: badgeAppear 1s ease-out;
        }
        
        @keyframes badgeAppear {
            0% { transform: translate(-50%, -50%) scale(0) rotate(-180deg); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; }
        }
        
        .badge-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        .badge-text {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .badge-subtitle {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }
        
        .rocket-body {
            width: 60px;
            height: 120px;
            background: linear-gradient(180deg, #8a2be2 0%, #4b0082 100%);
            border-radius: 30px 30px 10px 10px;
            position: relative;
            margin: 0 auto;
        }
        
        .rocket-window {
            width: 20px;
            height: 20px;
            background: lightblue;
            border-radius: 50%;
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            border: 2px solid #333;
        }
        
        .rocket-fins {
            position: absolute;
            bottom: 10px;
            width: 100%;
        }
        
        .fin-left {
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 8px solid #8a2be2;
            border-bottom: 25px solid #8a2be2;
            position: absolute;
            left: -12px;
            bottom: 0;
        }
        
        .fin-right {
            width: 0;
            height: 0;
            border-left: 8px solid #8a2be2;
            border-right: 15px solid transparent;
            border-bottom: 25px solid #8a2be2;
            position: absolute;
            right: -12px;
            bottom: 0;
        }
        
        .rocket-flame {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 30px;
            background: linear-gradient(to top, #ff4500 0%, #ff6347 50%, #ffd700 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: flicker 0.2s ease-in-out infinite alternate;
        }
        
        @keyframes flicker {
            0% { 
                transform: translateX(-50%) scaleY(1) scaleX(1);
                opacity: 1;
            }
            100% { 
                transform: translateX(-50%) scaleY(1.2) scaleX(0.8);
                opacity: 0.8;
            }
        }
        
        .story-content {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            padding: 40px;
        }
        
        .story-text {
            font-size: 1.3rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #e6e6fa;
        }
    </style>
</head>
<body>
    <div id="homeScreen">
        <h2>Little X</h2>
        <div class="rocket" onclick="startAdventure()">
            <div class="rocket-body">
                <div class="rocket-window"></div>
                <div class="rocket-fins">
                    <div class="fin-left"></div>
                    <div class="fin-right"></div>
                </div>
            </div>
            <div class="rocket-flame"></div>
        </div>
        <p>Click the rocket to start!</p>
        <button class="btn" onclick="startAdventure()">Start Adventure!</button>
        <button class="btn" onclick="testSpeech()">ðŸ§ª Test Speech</button>
    </div>

    <div id="centrifugeScreen" class="hidden">
        <h2>Astronaut Training: Centrifuge Simulation</h2>
        <div class="centrifuge-container">
            <div class="centrifuge-pod"></div>
        </div>
        <div class="g-force-display" id="gForceDisplay">G-Force: 1.0g</div>
        <p style="color: #b19cd9; margin-bottom: 20px;">Training your body for space travel...</p>
        <button class="btn" onclick="completeTraining()">Training Complete!</button>
        <button class="btn" onclick="goHome()">Back to Home</button>
    </div>

    <!-- Achievement Badge -->
    <div class="achievement-badge hidden" id="achievementBadge">
        <div class="badge-icon">ðŸš€</div>
        <div class="badge-text">Astronaut Training Complete!</div>
        <div class="badge-subtitle">You've earned your Space Explorer Badge</div>
        <button class="btn" onclick="hideAchievement()">Continue Adventure</button>
    </div>

    <div id="storyScreen" class="hidden">
        <div class="story-content">
            <div id="storyText" class="story-text"></div>
            <div id="storyChoices"></div>
            <button class="btn" onclick="goHome()">Back to Home</button>
        </div>
    </div>
        <div class="story-content">
            <div id="storyText" class="story-text"></div>
            <div id="storyChoices"></div>
            <button class="btn" onclick="goHome()">Back to Home</button>
        </div>
    </div>

    <script>
        console.log('=== WORKING VERSION LOADING ===');
        
        // Simple speech
        let speechEnabled = true;
        
        function speak(text) {
            if (!speechEnabled) return;
            try {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.9;
                speechSynthesis.speak(utterance);
            } catch(e) {
                console.log('Speech error:', e);
            }
        }
        
        function testSpeech() {
            speak('Test speech working!');
        }
        
        function startAdventure() {
            console.log('START ADVENTURE CLICKED!');
            speak("Welcome aboard, Little X! I'm ARIA, your AI companion. Let's begin astronaut training!");
            showCentrifuge();
        }
        
        function showCentrifuge() {
            showScreen('centrifugeScreen');
            startGForceSimulation();
            speak("Welcome to astronaut training! You'll experience the spinning sensation of a centrifuge. Hold on tight!");
        }
        
        function startGForceSimulation() {
            let gForce = 1.0;
            const interval = setInterval(() => {
                gForce += 0.1;
                document.getElementById('gForceDisplay').textContent = 'G-Force: ' + gForce.toFixed(1) + 'g';
                
                if (gForce >= 3.0) {
                    clearInterval(interval);
                    speak("Excellent! You've withstood 3 G-forces. Your body is ready for space travel!");
                }
            }, 500);
        }
        
        function completeTraining() {
            console.log('Training complete!');
            speak("Congratulations! You've earned your Space Explorer Badge. You're now ready for cosmic adventures!");
            showAchievement();
            
            setTimeout(() => {
                hideAchievement();
                showStory('start');
            }, 3000);
        }
        
        function showAchievement() {
            document.getElementById('achievementBadge').classList.remove('hidden');
        }
        
        function hideAchievement() {
            document.getElementById('achievementBadge').classList.add('hidden');
        }
        
        function showScreen(screenId) {
            document.getElementById('homeScreen').classList.add('hidden');
            document.getElementById('centrifugeScreen').classList.add('hidden');
            document.getElementById('storyScreen').classList.add('hidden');
            document.getElementById(screenId).classList.remove('hidden');
        }
        
        function showStory(storyKey) {
            console.log('Showing story:', storyKey);
            const story = stories[storyKey];
            
            if (!story) {
                console.error('Story not found:', storyKey);
                return;
            }
            
            showScreen('storyScreen');
            document.getElementById('storyText').textContent = story.text;
            speak(story.text);
            
            const choicesDiv = document.getElementById('storyChoices');
            choicesDiv.innerHTML = '';
            
            story.choices.forEach((choice) => {
                const button = document.createElement('button');
                button.className = 'btn';
                button.textContent = choice.text;
                button.onclick = () => makeChoice(choice.next);
                choicesDiv.appendChild(button);
            });
        }
        
        function makeChoice(nextStory) {
            console.log('Making choice:', nextStory);
            showStory(nextStory);
        }
        
        function goHome() {
            showScreen('homeScreen');
            speak("Welcome back to the home screen!");
        }
        
        // SIMPLE WORKING STORIES
        const stories = {
            start: {
                text: "Little X discovers a mysterious purple rocket ship in the backyard. The ship pulses with otherworldly energy. What should X do?",
                choices: [
                    { text: "Touch the rocket", next: "touch" },
                    { text: "Call out 'Hello?'", next: "call" },
                    { text: "Walk around it", next: "examine" }
                ]
            },
            
            touch: {
                text: "As X touches the smooth surface, the rocket lights up! A gentle voice says: 'Hello, young explorer. I am ARIA, the AI of this vessel. Will you join me on an adventure through space and imagination?'",
                choices: [
                    { text: "Yes, let's go!", next: "board" },
                    { text: "Who are you?", next: "questions" },
                    { text: "This is amazing!", next: "board" }
                ]
            },
            
            call: {
                text: "X calls out 'Hello?' A warm voice responds: 'Oh! A visitor! I'm ARIA, and I've been so lonely. Would you like to explore the universe with me?'",
                choices: [
                    { text: "Yes, let's explore!", next: "board" },
                    { text: "What are you exactly?", next: "questions" },
                    { text: "Touch the rocket", next: "touch" }
                ]
            },
            
            examine: {
                text: "X walks around the rocket, amazed by its shimmering surface. Strange symbols pulse along its sides. As X completes the circle, a hatch opens with starlight.",
                choices: [
                    { text: "Look inside", next: "board" },
                    { text: "Study the symbols", next: "symbols" },
                    { text: "Call out to whoever's inside", next: "call" }
                ]
            },
            
            questions: {
                text: "ARIA explains: 'I'm an AI created by dreamers who wanted to explore the universe through imagination. I can take us anywhere you can dream of!'",
                choices: [
                    { text: "That sounds amazing! Let's go!", next: "board" },
                    { text: "I'm ready for adventure!", next: "board" }
                ]
            },
            
            symbols: {
                text: "The symbols glow and move like living things! ARIA explains: 'Those are Dream Equations - mathematical poetry describing impossible places!'",
                choices: [
                    { text: "Take me to one of these places!", next: "board" },
                    { text: "This is incredible!", next: "board" }
                ]
            },
            
            board: {
                text: "X steps inside and gasps! The interior is vast, filled with swirling galaxies. ARIA's voice surrounds X: 'Welcome aboard! Where shall we explore first?'",
                choices: [
                    { text: "The crystal caves of Europa!", next: "europa" },
                    { text: "The singing mountains!", next: "mountains" },
                    { text: "The Library of All Stories!", next: "library" }
                ]
            },
            
            europa: {
                text: "The rocket transforms into a submarine and dives to Europa! You discover glowing crystal caves filled with ancient memories of a lost civilization. The crystals sing with voices of love and wisdom.",
                choices: [
                    { text: "Touch the memory crystals", next: "crystal_touch" },
                    { text: "Listen to their songs", next: "crystal_music" },
                    { text: "Continue exploring", next: "board" }
                ]
            },
            
            mountains: {
                text: "You arrive at crystalline mountains that sing healing songs! Each peak resonates with emotions like joy, courage, and love. The harmony can heal broken hearts.",
                choices: [
                    { text: "Listen to the healing songs", next: "mountain_songs" },
                    { text: "Sing along with the mountains", next: "sing_along" },
                    { text: "Continue exploring", next: "board" }
                ]
            },
            
            library: {
                text: "You arrive at the cosmic Library of All Stories! Books fly like birds, and every story ever told lives here. What kind of story calls to your soul?",
                choices: [
                    { text: "Adventure stories!", next: "adventure_books" },
                    { text: "Stories about friendship", next: "friendship_stories" },
                    { text: "Continue exploring", next: "board" }
                ]
            },
            
            crystal_touch: {
                text: "As X touches a crystal, they experience pure joy - a Luminari child laughing in gardens of light. The emotion is so beautiful that X cries tears of happiness.",
                choices: [
                    { text: "Experience more memories", next: "gratitude" },
                    { text: "Thank the crystals", next: "gratitude" },
                    { text: "Continue the adventure", next: "board" }
                ]
            },
            
            crystal_music: {
                text: "The crystals create the most beautiful symphony - the harmonics of memory itself! X hears ancient voices singing of love and hope for future generations.",
                choices: [
                    { text: "This is incredible!", next: "gratitude" },
                    { text: "Continue the adventure", next: "board" }
                ]
            },
            
            mountain_songs: {
                text: "The mountains sing songs of courage and love! X feels healed and filled with hope. The melodies teach that every challenge can be overcome with love.",
                choices: [
                    { text: "This healing is amazing!", next: "gratitude" },
                    { text: "Continue the adventure", next: "board" }
                ]
            },
            
            sing_along: {
                text: "X sings with the mountains and becomes part of their eternal chorus! Now X can always call on their healing power when needed.",
                choices: [
                    { text: "This is a precious gift", next: "gratitude" },
                    { text: "Continue the adventure", next: "board" }
                ]
            },
            
            adventure_books: {
                text: "Books flutter around like excited birds! You meet Captain Stardust and join incredible adventures sailing between galaxies, learning that imagination creates new worlds.",
                choices: [
                    { text: "This is the best adventure ever!", next: "gratitude" },
                    { text: "Continue exploring", next: "board" }
                ]
            },
            
            friendship_stories: {
                text: "You discover beautiful stories of friendship across the cosmos - stars and planets dancing together, comets befriending asteroids, and children from different worlds sharing dreams.",
                choices: [
                    { text: "Friendship connects everything!", next: "gratitude" },
                    { text: "Continue exploring", next: "board" }
                ]
            },
            
            gratitude: {
                text: "X thanks the universe for sharing its wonders. ARIA's voice fills with warmth: 'You've learned that the universe is full of consciousness, wonder, and friendship. Every day holds the possibility of amazing discoveries!'",
                choices: [
                    { text: "Start a new adventure", next: "start" },
                    { text: "Go home with new wisdom", next: "home" }
                ]
            },
            
            home: {
                text: "X returns home, but everything has changed. The purple rocket is now a permanent friend, and X knows that wonder and adventure are always just a dream away!",
                choices: [
                    { text: "Begin another adventure", next: "start" }
                ]
            }
        };
        
        console.log('=== WORKING VERSION LOADED ===');
    </script>
</body>
</html>
